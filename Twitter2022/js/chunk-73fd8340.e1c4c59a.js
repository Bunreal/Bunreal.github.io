(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-73fd8340"],{"1bd0":function(e,t,o){},5660:function(e,t,o){"use strict";o("1bd0")},e072:function(e,t,o){},ee09:function(e,t,o){"use strict";o.r(t);var n=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"wrap"},[o("navigation",{attrs:{userId:e.currentUser.id}}),o("div",{staticClass:"main"},[o("userTitle",{attrs:{userName:e.user.name,tweetNum:e.user.tweetsCount}}),o("navTabsFollow",{attrs:{userId:Number(e.$route.params.id)}}),o("div",{staticClass:"tweet-wrap"},e._l(e.followships,(function(t){return o("div",{key:t.id,staticClass:"tweet-card"},[o("div",{staticClass:"tweet-avatar"},[o("img",{attrs:{src:e._f("emptyAvatar")(t.followingUser.avatar),alt:""}})]),o("div",{staticClass:"tweet-content"},[o("div",{staticClass:"tweet-title"},[o("div",{staticClass:"tweet-name-group"},[o("p",{staticClass:"tweet-name"},[o("b",[e._v(e._s(t.followingUser.name))])]),t.isFollowed?o("div",{staticClass:"btn active",on:{click:function(o){return o.preventDefault(),o.stopPropagation(),e.unFollow(t.followingId)}}},[e._v("正在跟隨")]):o("div",{staticClass:"btn",on:{click:function(o){return o.preventDefault(),o.stopPropagation(),e.addFollow(t.followingId)}}},[e._v("跟隨")])])]),o("div",{staticClass:"tweet-text"},[o("p",[e._v(" "+e._s(t.followingUser.introduction)+" ")])])])])})),0)],1),o("followTopTypeB",{key:e.componentKey,on:{"addFollow-From-followTop":e.addFollowFromfollowTop,"unFollow-From-followTop":e.unFollowFromfollowTop}})],1)},r=[],i=o("5530"),l=o("2909"),s=o("1da1"),a=(o("96cf"),o("b0c0"),o("d81d"),o("7db0"),o("d3b7"),o("3d01")),c=o("7e59"),u=o("8e6e"),w=o("477d"),f=o("2708"),d=o("1602"),p=o("2f62"),h=o("2fa3"),m=o("b025"),v={name:"selfPageFollowing",components:{navigation:a["a"],followTopTypeB:c["a"],userTitle:u["a"],navTabsFollow:w["a"]},data:function(){return{user:{name:"",tweetNum:-1},followships:[],componentKey:0}},methods:{fetchUser:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function o(){var n,r,i,l,s,a,c,u,w,f,p,h,m,v;return regeneratorRuntime.wrap((function(o){while(1)switch(o.prev=o.next){case 0:return o.prev=0,o.next=3,d["a"].getUser(e);case 3:n=o.sent,r=n.data,i=r.id,l=r.account,s=r.name,a=r.email,c=r.role,u=r.introduction,w=r.avatar,f=r.cover,p=r.followingCount,h=r.followerCount,m=r.isFollowing,v=r.tweetsCount,t.user={id:i,account:l,name:s,email:a,role:c,introduction:u,avatar:w,cover:f,followingCount:p,followerCount:h,isFollowing:m,tweetsCount:v},o.next=11;break;case 8:o.prev=8,o.t0=o["catch"](0),console.log("error",o.t0);case 11:case"end":return o.stop()}}),o,null,[[0,8]])})))()},fetchUserFollowing:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function o(){var n;return regeneratorRuntime.wrap((function(o){while(1)switch(o.prev=o.next){case 0:return o.prev=0,o.next=3,d["a"].getUserFollowings(e);case 3:n=o.sent,t.followships=Object(l["a"])(n.data),console.log("this following",t.followships),t.followships.length<1&&h["a"].fire({icon:"info",title:"這個人沒有追蹤任何人"}),o.next=12;break;case 9:o.prev=9,o.t0=o["catch"](0),console.log("error",o.t0);case 12:case"end":return o.stop()}}),o,null,[[0,9]])})))()},isThisMe:function(e){this.isMe=this.currentUser.id==e},addFollow:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function o(){return regeneratorRuntime.wrap((function(o){while(1)switch(o.prev=o.next){case 0:return o.prev=0,console.log(e),o.next=4,m["a"].addFollow({id:e});case 4:t.followships=t.followships.map((function(t){return t.followingId===e?Object(i["a"])(Object(i["a"])({},t),{},{isFollowed:!0}):t})),t.forceRenderFollowTop(),o.next=11;break;case 8:o.prev=8,o.t0=o["catch"](0),h["a"].fire({icon:"error",title:"無法follow此人，請稍後再試"});case 11:case"end":return o.stop()}}),o,null,[[0,8]])})))()},unFollow:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function o(){return regeneratorRuntime.wrap((function(o){while(1)switch(o.prev=o.next){case 0:return o.prev=0,console.log(e),o.next=4,m["a"].unFollow({followingId:e});case 4:t.followships=t.followships.map((function(t){return t.followingId===e?Object(i["a"])(Object(i["a"])({},t),{},{isFollowed:!1}):t})),t.forceRenderFollowTop(),o.next=11;break;case 8:o.prev=8,o.t0=o["catch"](0),h["a"].fire({icon:"error",title:"無法unFollow此人，請稍後再試"});case 11:case"end":return o.stop()}}),o,null,[[0,8]])})))()},forceRenderFollowTop:function(){this.componentKey+=1},addFollowFromfollowTop:function(e){if(console.log(e.id),this.user.id===this.currentUser.id)this.followships.push({id:e.id,name:e.name,account:e.account,avatar:e.avatar,isFollowed:!0});else{var t=this.followships.find((function(t){return t.id===e.id}));t&&(this.followships=this.followships.map((function(t){return t.followingId===e.id?(console.log("user",t),Object(i["a"])(Object(i["a"])({},t),{},{isFollowed:!0})):t})))}this.followships=this.followships.map((function(t){return t.followingId===e.id?(console.log("user",t),Object(i["a"])(Object(i["a"])({},t),{},{isFollowed:!0})):t}))},unFollowFromfollowTop:function(e){console.log(e)}},computed:Object(i["a"])({},Object(p["b"])(["currentUser"])),created:function(){var e=localStorage.getItem("token");e||(h["a"].fire({icon:"warning",title:"請登入"}),this.$router.push("/login"));var t=this.$route.params.id;this.fetchUser(t),this.fetchUserFollowing(t),this.isThisMe(t)},watch:{"$route.params.id":{handler:function(e){this.fetchUser(e),this.fetchUserFollowing(e),this.isThisMe(e)},immediate:!0}},mixins:[f["b"],f["a"]]},g=v,F=(o("5660"),o("f513"),o("2877")),b=Object(F["a"])(g,n,r,!1,null,"0aec7063",null);t["default"]=b.exports},f513:function(e,t,o){"use strict";o("e072")}}]);
//# sourceMappingURL=chunk-73fd8340.e1c4c59a.js.map