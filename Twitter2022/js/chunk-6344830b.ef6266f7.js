(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6344830b"],{"12d7":function(e,t,a){"use strict";a("8c99")},1653:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"wrap"},[e.isClickpopupReplyLike?a("popupReplyLike",{attrs:{tweet:e.tweetPopup,user:e.user},on:{"close-PopupReplyLike":e.closepopupReplyLike,"after-create-reply-like":e.afterCreateReplyLike}}):e._e(),a("navigation",{attrs:{userId:e.currentUser.id}}),a("div",{staticClass:"main"},[a("userTitle",{attrs:{userName:e.user.name,tweetNum:e.user.tweetsCount}}),e.isMe?a("userInfo",{attrs:{"initial-user":e.user}}):a("userInfoOther",{attrs:{"initial-user":e.user}}),a("navTabs",{attrs:{userId:Number(e.$route.params.id)}}),a("div",{staticClass:"tweet-wrap"},e._l(e.tweets,(function(t){return a("div",{key:t.id,staticClass:"tweet-card"},[a("div",{staticClass:"tweet-avatar"},[a("img",{attrs:{src:e._f("emptyAvatar")(t.Tweet.User.avatar),alt:""}})]),a("div",{staticClass:"tweet-content"},[a("div",{staticClass:"tweet-name-group"},[a("router-link",{staticClass:"tweet-name",attrs:{to:{name:"SelfPage",params:{id:t.Tweet.User.id}}}},[a("b",[e._v(e._s(t.Tweet.User.name))])]),a("p",{staticClass:"tweet-account fz14"},[e._v(" @"+e._s(t.Tweet.User.account)+"・"+e._s(e._f("fromNow")(t.createdAt))+" ")])],1),a("router-link",{staticClass:"tweet-text",attrs:{to:{name:"tweet",params:{id:t.TweetId}}}},[a("p",[e._v(" "+e._s(t.Tweet.description)+" ")])]),a("div",{staticClass:"tweet-count"},[a("div",{staticClass:"tweet-reply",on:{click:function(a){return a.preventDefault(),a.stopPropagation(),e.openpopupReplyLike(t.TweetId)}}},[e._m(0,!0),a("p",{staticClass:"fz14"},[a("b",[e._v(e._s(t.ReplyCount))])])]),t.isLiked?a("div",{staticClass:"tweet-like",on:{click:function(a){return a.preventDefault(),a.stopPropagation(),e.unLike(t.TweetId)}}},[e._m(1,!0),a("p",{staticClass:"fz14"},[a("b",[e._v(e._s(t.LikeCount))])])]):e._e(),t.isLiked?e._e():a("div",{staticClass:"tweet-like",on:{click:function(a){return a.preventDefault(),a.stopPropagation(),e.addLike(t.TweetId)}}},[e._m(2,!0),a("p",{staticClass:"fz14"},[a("b",[e._v(e._s(t.LikeCount))])])])])],1)])})),0)],1),a("followTop",{attrs:{userId:e.currentUser.id,initialUser:e.user},on:{"add-following-num":e.addFollowingNum,"un-following-num":e.unFollowingNum}})],1)},i=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"tweet-reply-img"},[r("img",{attrs:{src:a("f5b6"),alt:""}})])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"tweet-like-img"},[r("img",{attrs:{src:a("7e3a"),alt:""}})])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"tweet-like-img"},[r("img",{attrs:{src:a("3c8a"),alt:""}})])}],n=a("2909"),s=a("5530"),o=a("1da1"),c=(a("96cf"),a("d81d"),a("b0c0"),a("7db0"),a("d3b7"),a("3d01")),p=a("447a"),u=a("5372"),l=a("87fa"),f=a("8e6e"),w=a("fc26"),d=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"popupReply-wrap"},[r("div",{staticClass:"overlay",on:{click:function(t){return t.stopPropagation(),t.preventDefault(),e.closePopupReplyLike.apply(null,arguments)}}}),r("div",{staticClass:"popupReply"},[r("div",{staticClass:"popupReply-colse"},[r("div",{staticClass:"popupReply-colse-img",on:{click:function(t){return t.stopPropagation(),t.preventDefault(),e.closePopupReplyLike.apply(null,arguments)}}},[r("img",{attrs:{src:a("3e02"),alt:""}})])]),r("div",{staticClass:"popupReply-text-wrap"},[r("div",{staticClass:"popupReply-user"},[r("div",{staticClass:"popupReply-avatar"},[r("div",{staticClass:"popupReply-avatar-img"},[r("img",{attrs:{src:e._f("emptyImage")(e.tweet.Tweet.User.avatar),alt:""}})])]),r("div",{staticClass:"popupReply-content"},[r("div",{staticClass:"popupReply-name-group"},[r("p",{staticClass:"popupReply-name"},[r("b",[e._v(e._s(e.tweet.Tweet.User.name))])]),r("p",{staticClass:"popupReply-account fz14"},[e._v(" @"+e._s(e.tweet.Tweet.User.account)+"・"+e._s(e._f("fromNow")(e.tweet.createdAt))+" ")])]),r("div",{staticClass:"popupReply-text"},[r("p",[e._v(" "+e._s(e.tweet.Tweet.description)+" ")]),r("p",{staticClass:"reply-to fz14"},[r("span",[e._v("回覆")]),e._v(" @"+e._s(e.tweet.Tweet.User.name)+" ")])])])]),r("div",{staticClass:"popupReply-again-inner"},[r("div",{staticClass:"popupReply-again-avatar"},[r("img",{attrs:{src:e._f("emptyImage")(e.user.avatar),alt:""}})]),r("textarea",{directives:[{name:"model",rawName:"v-model",value:e.popupText,expression:"popupText"}],attrs:{name:"",id:"",maxlength:"80",placeholder:"推你的回覆"},domProps:{value:e.popupText},on:{input:function(t){t.target.composing||(e.popupText=t.target.value)}}})]),r("div",{staticClass:"popupReply-btn-wrap"},[e.popupText.length>=80?r("div",{staticClass:"post-text-num-warning"},[e._v(" 字數不可超過 80 字 ")]):e._e(),e.noZero?r("div",{staticClass:"post-text-num-warning"},[e._v("不得為空白")]):e._e(),r("div",{staticClass:"btn popupReply-btn active",on:{click:function(t){return t.preventDefault(),t.stopPropagation(),e.handleSubmit.apply(null,arguments)}}},[e._v(" 推文 ")])])])])])},A=[],m=(a("498a"),a("2708")),g={name:"popupReplyList",props:{tweet:{type:Object,required:!0},user:{type:Object,required:!0}},data:function(){return{popupText:"",noZero:!1}},watch:{popupText:function(){this.popupText&&(this.noZero=!1)}},methods:{closePopupReplyLike:function(){this.$emit("close-PopupReplyLike",{isClickpopupReplyLike:!1})},handleSubmit:function(){this.popupText.trim().length>=140||(this.popupText.trim()?this.$emit("after-create-reply-like",{TweetId:this.tweet.TweetId,comment:this.popupText}):this.noZero=!0)}},mixins:[m["b"],m["a"]]},v=g,h=(a("22c4"),a("2877")),C=Object(h["a"])(v,d,A,!1,null,"a1513714",null),k=C.exports,R=a("1602"),b=a("6783"),y=a("2f62"),L=a("2fa3"),U={name:"mainPageLikes",components:{navigation:c["a"],followTop:p["a"],userInfo:u["a"],userTitle:f["a"],navTabs:w["a"],userInfoOther:l["a"],popupReplyLike:k},data:function(){return{user:{id:-1,account:"",name:"",email:"",role:"",introduction:"",avatar:"https://dummyimage.com/600x400/a1a1a1/fff.jpg&text=+",cover:"https://dummyimage.com/600x400/a1a1a1/fff.jpg&text=+",followingCount:-1,followerCount:-1,isFollowing:!1,tweetsCount:0},tweets:[],tweetPopup:{},isMe:!0,isClickpopupReplyLike:!1}},methods:{addLike:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,R["a"].addLike({TweetId:e});case 3:console.log("TweetId",e),t.tweets=t.tweets.map((function(t){return t.TweetId===e?Object(s["a"])(Object(s["a"])({},t),{},{isLiked:!0,LikeCount:t.LikeCount+1}):t})),a.next=10;break;case 7:a.prev=7,a.t0=a["catch"](0),L["a"].fire({icon:"error",title:"無法like此筆tweet，請稍後再試"});case 10:case"end":return a.stop()}}),a,null,[[0,7]])})))()},unLike:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){var r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return console.log("TweetId",e),a.prev=1,console.log("TweetId",e),a.next=5,R["a"].unLike({TweetId:e});case 5:r=a.sent,console.log("dataUnLike",r),t.tweets=t.tweets.map((function(t){return t.TweetId===e?Object(s["a"])(Object(s["a"])({},t),{},{isLiked:!1,LikeCount:t.LikeCount-1}):t})),a.next=13;break;case 10:a.prev=10,a.t0=a["catch"](1),L["a"].fire({icon:"error",title:"無法unlike此筆tweet，請稍後再試"});case 13:case"end":return a.stop()}}),a,null,[[1,10]])})))()},fetchUser:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){var r,i,n,s,o,c,p,u,l,f,w,d,A,m;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,R["a"].getUser(e);case 3:r=a.sent,i=r.data,n=i.id,s=i.account,o=i.name,c=i.email,p=i.role,u=i.introduction,l=i.avatar,f=i.cover,w=i.isFollowing,d=i.followingCount,A=i.followerCount,m=i.tweetsCount,t.user={id:n,account:s,name:o,email:c,role:p,introduction:u,avatar:l,cover:f,followingCount:d,followerCount:A,isFollowing:w,tweetsCount:m},a.next=12;break;case 8:a.prev=8,a.t0=a["catch"](0),console.log("error",a.t0),L["a"].fire({icon:"error",title:"無此使用者或讀取資料錯誤"});case 12:case"end":return a.stop()}}),a,null,[[0,8]])})))()},fetchUserLikes:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){var r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,R["a"].getUserLikes(e);case 3:r=a.sent,t.tweets=Object(n["a"])(r.data),t.tweets.length<1&&L["a"].fire({icon:"info",title:"目前沒有喜歡的內容"}),a.next=11;break;case 8:a.prev=8,a.t0=a["catch"](0),console.log("error",a.t0);case 11:case"end":return a.stop()}}),a,null,[[0,8]])})))()},addFollowingNum:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){var r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:try{r=e.followingCount,console.log("followingCount",r),t.user.followingCount=r}catch(i){L["a"].fire({icon:"error",title:"無法新增此筆tweetReply"})}case 1:case"end":return a.stop()}}),a)})))()},unFollowingNum:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){var r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:try{r=e.followingCount,console.log("followingCount",r),t.user.followingCount=r}catch(i){L["a"].fire({icon:"error",title:"無法新增此筆tweetReply"})}case 1:case"end":return a.stop()}}),a)})))()},isThisMe:function(e){this.isMe=this.currentUser.id==e},openpopupReplyLike:function(e){console.log(e),this.tweetPopup=this.tweets.find((function(t){return t.TweetId===e})),this.isClickpopupReplyLike=!0},closepopupReplyLike:function(e){var t=e.isClickpopupReplyLike;this.isClickpopupReplyLike=t},afterCreateReplyLike:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){var r,i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,r=e.comment,i=e.TweetId,a.next=4,b["a"].postTweetsReply({comment:r,TweetId:i});case 4:t.$router.push({name:"tweet",params:{id:i}}),a.next=10;break;case 7:a.prev=7,a.t0=a["catch"](0),L["a"].fire({icon:"error",title:"無法新增此筆tweetReply"});case 10:case"end":return a.stop()}}),a,null,[[0,7]])})))()}},computed:Object(s["a"])({},Object(y["b"])(["currentUser"])),created:function(){var e=localStorage.getItem("token");e||(L["a"].fire({icon:"warning",title:"請登入"}),this.$router.push("/login"));var t=this.$route.params.id;this.fetchUser(t),this.fetchUserLikes(t),this.isThisMe(t)},watch:{"$route.params.id":{handler:function(e){this.fetchUser(e),this.fetchUserLikes(e),this.isThisMe(e)},immediate:!0}},mixins:[m["b"],m["a"]]},x=U,I=(a("12d7"),a("f015"),Object(h["a"])(x,r,i,!1,null,"f0f14b32",null));t["default"]=I.exports},"22c4":function(e,t,a){"use strict";a("6d69")},"3c8a":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB8AAAAeCAYAAADU8sWcAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAMMSURBVHgB7VZLbhNBEK3q6WEREJgbmBPEYsUKYi4Qs2SFvYsgKIOUoAgleBwbFGILJoodZZf4BM4NMmLBgg3mBs4NLMECxZ5uqtq28GfGmSQWsMiT7Pl0db2qmvo0wDX+AXDaouM4icCeywBa8/wcaPiuOh3/wNtuhckvr24saMCUQJjXWp+CgGZ1p3R8YfLltbcroLVLEonJXehWd7YKg8clZz0pbfuQbhfGRTVAC7XOVSslPxb58uuNPGh06bZN2+ugwCfJNinKIuBi3yC/Wi6mmdiy7RNSlNRIRIrkNTRRYILkF0kuY4xAzNZ2tupTyY3HoD1WFAgrfbDttobXl9bdpKWCE9SQRARPacgYYq3rdlc6nue2h+VfrG46JPeJHVEQpPfL75uh5I7jJjp28I2VdS3r3jhxmAH9V8cUhScQgSEDTLQG78WwUGAHxgv6HUURM3iNwpvje44QGfoKpqBWKXr0KTgiC5zEoeRa6ZS5UgjhHHACkZE5NmKaoX+U93SeibnM4JUcERBgSkqhakMM7JWLRxAXCBM6Rz3XcGpeapGAv4ARcux9F1BKJWHWQDRRFUK0QskJPv9ZlvUIZgyqeZNPsvuzGUouA+lzVpJgZjgrrwpuu1xFpNv3PK8dSm4aBBrvEx15MwszAnW3Z3xVCCNVJCYl9a65oliZhffcfsnrLPeD/bHqmCDvDQDtmy4nbztwRUj7RoOvVEmF8TURtqFryZzpSKjzz9fepOCSMAMKdCrM60hy7liUdMZSBKtxmfAbo3uTEXhAhcmIqM2mH9PAMOG3b53ABdD7zpYJNxlQiGq/YpoS2bFyHDLyP/VybfMQYhIP5jsx71YrW26ULJ6rbHh8IhzLsx+54VqNIubhVKuUstN0n0s+bgAfi4JOJz1+juNGQuoafMqJQxybfGCADFTDZC8ZwAnJGWwOmTfu5LVW/bKkUJdLsUo0NvkA5CEdKjHf4+mPyd6Zrk0GFGqVd15cXRZcEF+/fPbvP3xcR6XuIuIDIv5FHeSD7Mqnex+LPlzjf8dv3gtecMwCXM4AAAAASUVORK5CYII="},"6d69":function(e,t,a){},"7db0":function(e,t,a){"use strict";var r=a("23e7"),i=a("b727").find,n=a("44d2"),s="find",o=!0;s in[]&&Array(1)[s]((function(){o=!1})),r({target:"Array",proto:!0,forced:o},{find:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}}),n(s)},"7e3a":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB8AAAAeCAYAAADU8sWcAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAHdSURBVHgB7ZbNbcIwFIDfc0KqcmIENoARYIMcEZfCBGUDYILCBIULicSFDcgIdIOwASeKiOLXZwRSoE5wEKE98F2i2M/5/PwTG+DJH4BZleS6lbhcdpGodnhH/IqkDF59P9TFR61WgyyrbnG8BFhzu5XteYvc8rjdfmfZAIgqmkYDazYbnt6/W61qCfETEBuaT4UkZbfk+4HmO1pxn1gAWRAFnFVTiR0hlhxfzQrn0eig500z5YeMAUZgACKOuBPuNfGRjYyipjOfr04FIllLnY4a4h4YQkQ9Q7GiImz7I1lwJo/3ezfHx/LDa0ItYq2cxXUomIh3j1bOc1iDB3Iml1Ku4YFcZr6BgkEpQ72c9y4UjL3b6bea9fIS8KO47Dk5XCw2WjlOJqoigKIgOvvDiV/1Uo6hGHFo+/4EsuSHAwAxgPvLh5dFQhcXxXEX7jn3mqxT5eq8lpqe3kpE1NSVi7QGjuepky31ImAK/7KHaZcPkdXQcpwu7/0QbhUTjUuz2SCtPvMapThcFhCXfKupQg542qY8ep2smKvyWzpgIlYIMEDN2Z4XDfd0dS1WDbWJWGGUeZKo3R5wo76maqN2yHGhGpFbrlDTYPHNViC+KSmv6LG93Y6S/+0n/5YffUfReIUCgMcAAAAASUVORK5CYII="},"8c99":function(e,t,a){},d2d3:function(e,t,a){},f015:function(e,t,a){"use strict";a("d2d3")},f5b6:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB8AAAAeCAYAAADU8sWcAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAKcSURBVHgB7VZdbtNAEJ611zwgUfkG+AakN3BOQDgB6VtFjeqqJOpDmji0oEoN4EhplLeUG7QnINwgnABzgzzXaw+zGxcldn4dixf4HpL17ux+87M7MwD/Ktg2wq7rmg/GU0tDzVy0LgQPBr4XwIZYSy4JxZO9YwSsMgQLNsMoBvjav764hbzkTq15DIgeSSlLESCgDWMWwyQtixrJIJrAWIk+/8hHYVge+FfBVuROvdECZF5ydFeE3N/Upc67ho0aGyaemsQQlfvXH8cbkT8SIyNLYzzodS5HkAOkBHmNtaQCIgz30x7Q0hsO3TMrsXgSaXo5L7EE7fUoFG0amtwwhun1DLluGFJT2hO3B1eb39yVCgCOaGjLcCwld13PpDhUpbtvOh98KAoIbfU/DcFicqELW00ijKBAqNCheiGlpeR0/dRijPEPKBwsoB/z6PTy+WLyBBjjBArnjjNnzpEjMCXANGbCX8AcOUMM1CTTXkDRQJX5JjefGr8WkvOIq4tBabEiczoUBOe0UZEpms79Pjs/R+77HhHjPQ1NwfdcKAqaNs0dAHdLySUizj31LBi2jurN17AjVHECLMncka5yGXKZ1WIGJ3JMd+DWqTdbkBNT5VElK5mq0+vLq5qKExsmsQo0Bnf0BO9lw6CUXFPhEosVcRzBQf9ztravrOeHZ56lC+ExxrLuR9budd57mT1UmJIiYoMspxGcLCJeSz6rhBFFNnngZdIw2HQvRr3OxZwrpZupBPvT5gPHQuevVhWnrXq4R0V4FP2cJVetlvFMWluZSmGXh9yTr2fVWRx2xNvaeVUgfKGhuW3zkZucejbLqZ1/Qxlb5T/sGg/rrS2EPOnPrF1aLQ12grRW39+l1doaMs5val4J/iMnfgM24i34Qh8jkgAAAABJRU5ErkJggg=="}}]);
//# sourceMappingURL=chunk-6344830b.ef6266f7.js.map