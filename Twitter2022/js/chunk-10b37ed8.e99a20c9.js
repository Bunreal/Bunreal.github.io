(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-10b37ed8"],{"959a":function(e,t,r){"use strict";r("e2a6")},ab60:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"wrap"},[r("navigation",{attrs:{userId:e.currentUser.id}}),r("div",{staticClass:"main"},[r("userTitle",{attrs:{userName:e.user.name,tweetNum:e.user.tweetsCount}}),e.isMe?r("userInfo",{attrs:{"initial-user":e.user}}):r("userInfoOther",{attrs:{"initial-user":e.user}}),r("navTabs",{attrs:{userId:Number(e.$route.params.id)}}),r("div",{staticClass:"tweet-wrap"},e._l(e.replies,(function(t){return r("div",{key:t.id,staticClass:"tweet-card"},[r("div",{staticClass:"tweet-avatar"},[r("img",{attrs:{src:e._f("emptyAvatar")(e.user.avatar),alt:""}})]),r("div",{staticClass:"tweet-content"},[r("div",{staticClass:"tweet-name-group"},[r("p",{staticClass:"tweet-name"},[r("b",[e._v(e._s(e.user.name))])]),r("p",{staticClass:"tweet-account fz14"},[e._v(" @"+e._s(e.user.account)+"・"+e._s(e._f("fromNow")(t.createdAt))+" ")])]),r("div",[r("p",{staticClass:"fz14"},[r("span",{staticClass:"reply-title"},[e._v("回覆")]),r("span",{staticClass:"reply-account"},[e._v(" @"+e._s(t.Tweet.User.account))])])]),r("router-link",{staticClass:"tweet-text",attrs:{to:{name:"tweet",params:{id:t.TweetId}}}},[r("p",[e._v(" "+e._s(t.comment)+" ")])])],1)])})),0)],1),r("followTop",{attrs:{userId:e.currentUser.id,initialUser:e.user},on:{"add-following-num":e.addFollowingNum,"un-following-num":e.unFollowingNum}})],1)},n=[],s=r("5530"),i=r("2909"),o=r("1da1"),c=(r("96cf"),r("b0c0"),r("4de4"),r("d3b7"),r("3d01")),u=r("447a"),l=r("5372"),f=r("87fa"),w=r("8e6e"),m=r("fc26"),p=r("1602"),d=r("2f62"),h=r("2708"),g=r("2fa3"),v={name:"mainPage",components:{navigation:c["a"],followTop:u["a"],userInfo:l["a"],userTitle:w["a"],navTabs:m["a"],userInfoOther:f["a"]},data:function(){return{user:{id:-1,account:"",name:"",role:"",introduction:"",avatar:"https://dummyimage.com/600x400/a1a1a1/fff.jpg&text=+",cover:"https://dummyimage.com/600x400/a1a1a1/fff.jpg&text=+",followingCount:-1,followerCount:-1,isFollowing:!1,tweetsCount:0},replies:[],isMe:!0}},methods:{fetchUser:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function r(){var a,n,s,i,o,c,u,l,f,w,m,d,h,v;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,p["a"].getUser(e);case 3:a=r.sent,n=a.data,s=n.id,i=n.account,o=n.name,c=n.email,u=n.role,l=n.introduction,f=n.avatar,w=n.cover,m=n.isFollowing,d=n.followingCount,h=n.followerCount,v=n.tweetsCount,t.user={id:s,account:i,name:o,email:c,role:u,introduction:l,avatar:f,cover:w,followingCount:d,followerCount:h,isFollowing:m,tweetsCount:v},r.next=12;break;case 8:r.prev=8,r.t0=r["catch"](0),console.log("error",r.t0),g["a"].fire({icon:"error",title:"無此使用者或讀取資料錯誤"});case 12:case"end":return r.stop()}}),r,null,[[0,8]])})))()},fetchUserReplies:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function r(){var a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,p["a"].getUserReplies(e);case 3:a=r.sent,t.replies=Object(i["a"])(a.data),t.replies=t.replies.filter((function(e){return e.Tweet})),t.replies.length<1&&g["a"].fire({icon:"info",title:"目前沒有回覆的內容"}),r.next=12;break;case 9:r.prev=9,r.t0=r["catch"](0),console.log(r.t0);case 12:case"end":return r.stop()}}),r,null,[[0,9]])})))()},addFollowingNum:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function r(){var a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:try{a=e.followingCount,console.log("followingCount",a),t.user.followingCount=a}catch(n){g["a"].fire({icon:"error",title:"無法新增此筆tweetReply"})}case 1:case"end":return r.stop()}}),r)})))()},unFollowingNum:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function r(){var a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:try{a=e.followingCount,console.log("followingCount",a),t.user.followingCount=a}catch(n){g["a"].fire({icon:"error",title:"無法新增此筆tweetReply"})}case 1:case"end":return r.stop()}}),r)})))()},isThisMe:function(e){this.isMe=this.currentUser.id==e}},computed:Object(s["a"])({},Object(d["b"])(["currentUser"])),created:function(){var e=localStorage.getItem("token");e||(g["a"].fire({icon:"warning",title:"請登入"}),this.$router.push("/login"));var t=this.$route.params.id;this.fetchUser(t),this.fetchUserReplies(t),this.isThisMe(t)},watch:{"$route.params.id":{handler:function(e){this.fetchUser(e),this.fetchUserReplies(e),this.isThisMe(e)},immediate:!0}},mixins:[h["b"],h["a"]]},C=v,b=(r("959a"),r("2877")),x=Object(b["a"])(C,a,n,!1,null,"b5ac46b8",null);t["default"]=x.exports},e2a6:function(e,t,r){}}]);
//# sourceMappingURL=chunk-10b37ed8.e99a20c9.js.map